import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Input } from "@/components/ui/input";
import { Search, Heart, User, Gavel, Plus } from "lucide-react";
import { AuthDialog } from "./AuthDialog";
import { useNavigate, Link } from "react-router-dom";

export const Header = () => {
  const navigate = useNavigate();

  return (
    <header className="sticky top-0 z-50 w-full border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60">
      <div className="container flex h-16 items-center">
        {/* Logo */}
        <div className="flex items-center gap-2">
          <div className="flex items-center gap-2">
            <svg 
              className="h-8 w-auto md:h-10"
              viewBox="0 0 4752 1024" 
              preserveAspectRatio="xMidYMid meet"
              aria-label="Astacar"
              role="img"
            >
              <defs>
                <linearGradient id="astacarGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" stopColor="#4B0082"/>
                  <stop offset="50%" stopColor="#32DCFA"/>
                  <stop offset="100%" stopColor="#00FFAF"/>
                </linearGradient>
              </defs>
              <title>Astacar</title>
              <g transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)" fill="url(#astacarGradient)" stroke="none">
                <path d="M11435 8484c-806-63-1445-336-1845-786-234-264-366-533-431-878-29-152-36-465-15-626 75-566 353-953 889-1234 192-101 427-187 692-255 72-18 399-88 728-154 806-162 1344-235 1727-235 320 0 560 43 710 128 301 170 456 480 485 970 14 234-21 426-115 633-177 389-508 656-1033 833-176 59-392 116-653 172-596 128-970 227-1280 339-277 100-466 208-577 329-85 93-125 187-125 296 0 189 94 342 283 461 162 102 358 154 608 162 318 10 612-42 913-161 201-79 370-175 522-296 120-96 201-184 270-293 52-82 87-162 115-264 21-78 23-105 23-285 0-180-2-207-23-285-48-178-138-345-254-472-88-96-186-170-314-238-85-45-104-60-104-82 0-35 28-48 125-59 145-16 269 5 415 70 234 104 426 268 576 492 122 182 198 378 238 614 21 125 21 375 0 500-40 236-116 432-238 614-150 224-342 388-576 492-284 126-593 171-945 137z"/>
                <path d="M20935 8481c-387-32-722-139-1005-321-233-150-425-342-575-575-182-283-289-618-321-1005-21-254-6-538 43-808 85-468 274-868 566-1197 233-263 508-461 825-594 283-119 578-179 895-183 254-3 478 24 708 86 468 126 868 374 1197 742 263 294 461 638 594 1030 119 350 179 720 183 1124 3 317-24 612-86 936-126 658-482 1216-1065 1670-394 307-862 506-1401 595-195 32-359 32-554 0zm674-629c359-46 669-157 930-333 200-135 362-297 497-497 176-261 287-571 333-930 22-173 14-467-18-640-85-462-297-851-634-1166-261-244-571-414-930-510-173-46-467-54-640-18-462 95-851 331-1166 706-244 290-414 659-510 1105-46 215-54 569-18 772 95 534 331 984 706 1348 290 281 659 479 1105 594 215 55 569 69 345 19z"/>
                <path d="M31020 7710c-77-7-175-23-218-35-376-106-673-374-779-705-41-127-49-206-49-484 0-278 8-357 49-484 106-331 403-599 779-705 100-28 133-32 268-32 135 0 168 4 268 32 376 106 673 374 779 705 41 127 49 206 49 484 0 278-8 357-49 484-106 331-403 599-779 705-43 12-141 28-218 35-77 7-100 7-100 0zm221-618c131-31 241-108 308-216 46-74 66-138 72-229 9-129-19-236-85-324-108-144-274-220-458-210-184 10-350 86-458 210-66 88-94 195-85 324 6 91 26 155 72 229 67 108 177 185 308 216 67 16 259 16 326 0z"/>
                <path d="M37520 7710c-77-7-175-23-218-35-376-106-673-374-779-705-41-127-49-206-49-484 0-278 8-357 49-484 106-331 403-599 779-705 100-28 133-32 268-32 135 0 168 4 268 32 376 106 673 374 779 705 41 127 49 206 49 484 0 278-8 357-49 484-106 331-403 599-779 705-43 12-141 28-218 35-77 7-100 7-100 0zm221-618c131-31 241-108 308-216 46-74 66-138 72-229 9-129-19-236-85-324-108-144-274-220-458-210-184 10-350 86-458 210-66 88-94 195-85 324 6 91 26 155 72 229 67 108 177 185 308 216 67 16 259 16 326 0z"/>
                <path d="M2655 7059c-341-25-629-135-864-330-180-149-320-334-418-552-78-173-120-343-136-548-11-145-6-405 10-545 49-426 195-786 437-1078 149-180 334-320 552-418 173-78 343-120 548-136 145-11 405-6 545 10 426 49 786 195 1078 437 180 149 320 334 418 552 78 173 120 343 136 548 11 145 6 405-10 545-49 426-195 786-437 1078-149 180-334 320-552 418-173 78-343 120-548 136-80 6-351 11-379 6zm445-618c195-21 360-78 510-176 119-78 217-176 295-295 98-150 155-315 176-510 8-74 8-226 0-300-21-195-78-360-176-510-78-119-176-217-295-295-150-98-315-155-510-176-74-8-226-8-300 0-195 21-360 78-510 176-119 78-217 176-295 295-98 150-155 315-176 510-8 74-8 226 0 300 21 195 78 360 176 510 78 119 176 217 295 295 150 98 315 155 510 176 74 8 226 8 300 0z"/>
                <path d="M6955 7059c-341-25-629-135-864-330-180-149-320-334-418-552-78-173-120-343-136-548-11-145-6-405 10-545 49-426 195-786 437-1078 149-180 334-320 552-418 173-78 343-120 548-136 145-11 405-6 545 10 426 49 786 195 1078 437 180 149 320 334 418 552 78 173 120 343 136 548 11 145 6 405-10 545-49 426-195 786-437 1078-149 180-334 320-552 418-173 78-343 120-548 136-80 6-351 11-379 6zm445-618c195-21 360-78 510-176 119-78 217-176 295-295 98-150 155-315 176-510 8-74 8-226 0-300-21-195-78-360-176-510-78-119-176-217-295-295-150-98-315-155-510-176-74-8-226-8-300 0-195 21-360 78-510 176-119 78-217 176-295 295-98 150-155 315-176 510-8 74-8 226 0 300 21 195 78 360 176 510 78 119 176 217 295 295 150 98 315 155 510 176 74 8 226 8 300 0z"/>
                <path d="M41520 7710c-77-7-175-23-218-35-376-106-673-374-779-705-41-127-49-206-49-484 0-278 8-357 49-484 106-331 403-599 779-705 100-28 133-32 268-32 135 0 168 4 268 32 376 106 673 374 779 705 41 127 49 206 49 484 0-278-8-357-49-484-106-331-403-599-779-705-43-12-141-28-218-35-77-7-100-7-100 0zm221-618c131-31 241-108 308-216 46-74 66-138 72-229 9-129-19-236-85-324-108-144-274-220-458-210-184 10-350 86-458 210-66 88-94 195-85 324 6 91 26 155 72 229 67 108 177 185 308 216 67 16 259 16 326 0z"/>
                <path d="M44480 8450c-495-30-925-191-1295-485-286-227-509-510-669-849-126-267-200-546-226-848-15-174-6-456 20-630 75-502 265-926 568-1268 227-257 510-459 849-606 267-116 546-184 848-206 174-13 456-4 630 20 502 69 926 239 1268 509 257 203 459 456 606 759 116 239 184 498 206 785 13 174 4 456-20 630-69 502-239 926-509 1268-203 257-456 459-759 606-239 116-498 184-785 206-126 10-406 15-532 9zm582-618c233-22 436-79 616-173 142-74 259-162 366-276 155-165 263-360 326-590 42-154 54-245 54-420 0-175-12-266-54-420-63-230-171-425-326-590-107-114-224-202-366-276-180-94-383-151-616-173-126-12-306-12-432 0-233 22-436 79-616 173-142 74-259 162-366 276-155 165-263 360-326 590-42 154-54 245-54 420 0 175 12 266 54 420 63 230 171 425 326 590 107 114 224 202 366 276 180 94 383 151 616 173 126 12 306 12 432 0z"/>
              </g>
            </svg>
          </div>
          <Badge variant="outline" className="text-xs hidden sm:block">MVP</Badge>
        </div>

        {/* Search - Hidden on mobile, shown on tablet+ */}
        <div className="flex-1 max-w-md mx-4 md:mx-8 hidden md:block">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
            <Input 
              placeholder="Поиск по марке, модели..."
              className="pl-10 bg-muted/50"
              aria-label="Поиск автомобилей"
            />
          </div>
        </div>

        {/* Navigation */}
        <nav className="flex items-center gap-2 md:gap-4 ml-auto">
          {/* Desktop Navigation */}
          <div className="hidden md:flex items-center gap-4">
            <Link to="/" className="text-sm font-medium hover:text-primary transition-colors">
              Каталог
            </Link>
            <Link to="/how-it-works" className="text-sm font-medium hover:text-primary transition-colors">
              Как это работает
            </Link>
          </div>
          
          {/* User Actions */}
          <div className="flex items-center gap-1 md:gap-2">
            <Button variant="ghost" size="icon" aria-label="Избранное">
              <Heart className="h-4 w-4" />
            </Button>
            
            <AuthDialog>
              <Button variant="ghost" size="icon" aria-label="Вход в аккаунт">
                <User className="h-4 w-4" />
              </Button>
            </AuthDialog>
            
            <Button 
              variant="default" 
              size="sm" 
              className="ml-2" 
              onClick={() => navigate('/sell')}
            >
              <Plus className="h-4 w-4 mr-1" />
              <span className="hidden sm:inline">Продать авто</span>
              <span className="sm:hidden">Продать</span>
            </Button>
          </div>
        </nav>
      </div>
      
      {/* Mobile Search - Shown on mobile only */}
      <div className="md:hidden px-4 pb-3">
        <div className="relative">
          <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
          <Input 
            placeholder="Поиск..."
            className="pl-10 bg-muted/50"
            aria-label="Поиск автомобилей"
          />
        </div>
      </div>
    </header>
  );
};